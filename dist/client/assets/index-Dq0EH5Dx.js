import{a as l,z as g,y as U,p as h,B as b}from"./chunk-JZWAC4HX-l9NPZ7AV.js";const I="modulepreload",x=function(t){return"https://cdn.shopify.com/oxygen-v2/51238/93094/192007/2937520/"+t},y={},D=function(i,a,n){let c=Promise.resolve();if(a&&a.length>0){let r=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));c=r(a.map(d=>{if(d=x(d),d in y)return;y[d]=!0;const u=d.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":I,u||(p.as="script"),p.crossOrigin="",p.href=d,s&&p.setAttribute("nonce",s),document.head.appendChild(p),u)return new Promise((E,w)=>{p.addEventListener("load",E),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(r){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=r,window.dispatchEvent(e),!e.defaultPrevented)throw r}return c.then(r=>{for(const e of r||[])e.status==="rejected"&&o(e.reason);return i().catch(o)})},v={};function L(t,i){const a=v[t];if(a)return a;const n=new Promise((c,o)=>{const r=document.createElement("script");i!=null&&i.module?r.type="module":r.type="text/javascript",r.src=t,r.onload=()=>{c(!0)},r.onerror=()=>{o(!1)},(i==null?void 0:i.in)==="head"?document.head.appendChild(r):document.body.appendChild(r);const e=i==null?void 0:i.attributes;e&&Object.keys(e).forEach(s=>{r.setAttribute(s,e[s])})});return v[t]=n,n}function P(t,i){const[a,n]=l.useState("loading");return l.useEffect(()=>{L(t,i).then(()=>n("done")).catch(()=>n("error"))},[t]),a}var q={canTrack:()=>!1,cart:null,customData:{},prevCart:null,publish:()=>{},shop:null,subscribe:()=>{},register:()=>({ready:()=>{}}),customerPrivacy:null,privacyBanner:null};l.createContext(q);var S="cartFormInput";function f({children:t,action:i,inputs:a,route:n,fetcherKey:c}){let o=U({key:c});return h.jsxs(o.Form,{action:n||"",method:"post",children:[(i||a)&&h.jsx("input",{type:"hidden",name:S,value:JSON.stringify({action:i,inputs:a})}),typeof t=="function"?t(o):t]})}f.INPUT_NAME=S;f.ACTIONS={AttributesUpdateInput:"AttributesUpdateInput",BuyerIdentityUpdate:"BuyerIdentityUpdate",Create:"Create",DiscountCodesUpdate:"DiscountCodesUpdate",GiftCardCodesUpdate:"GiftCardCodesUpdate",GiftCardCodesRemove:"GiftCardCodesRemove",LinesAdd:"LinesAdd",LinesRemove:"LinesRemove",LinesUpdate:"LinesUpdate",NoteUpdate:"NoteUpdate",SelectedDeliveryOptionsUpdate:"SelectedDeliveryOptionsUpdate",MetafieldsSet:"MetafieldsSet",MetafieldDelete:"MetafieldDelete",DeliveryAddressesAdd:"DeliveryAddressesAdd",DeliveryAddressesUpdate:"DeliveryAddressesUpdate",DeliveryAddressesRemove:"DeliveryAddressesRemove"};function R(t){let i={};for(let r of t.entries()){let e=r[0],s=t.getAll(e);i[e]=s.length>1?s:r[1],i[e]==="on"?i[e]=!0:i[e]==="off"&&(i[e]=!1)}let{cartFormInput:a,...n}=i,{action:c,inputs:o}=a?JSON.parse(String(a)):{};return{action:c,inputs:{...o,...n}}}f.getFormInput=R;var O="__h_pending_";function T(t){return O+t}function C(t){return t.startsWith(O)}function k(t){let i=b();if(!i||!i.length)return t;let a=t!=null&&t.lines?structuredClone(t):{lines:{nodes:[]}},n=a.lines.nodes,c=!1;for(let{formData:o}of i){if(!o)continue;let r=f.getFormInput(o);if(r.action===f.ACTIONS.LinesAdd)for(let e of r.inputs.lines){if(!e.selectedVariant){console.error("[h2:error:useOptimisticCart] No selected variant was passed in the cart action. Make sure to pass the selected variant if you want to use an optimistic cart");continue}let s=n.find(d=>{var u;return d.merchandise.id===((u=e.selectedVariant)==null?void 0:u.id)});c=!0,s?(s.quantity=(s.quantity||1)+(e.quantity||1),s.isOptimistic=!0):n.unshift({id:T(e.selectedVariant.id),merchandise:e.selectedVariant,isOptimistic:!0,quantity:e.quantity||1})}else if(r.action===f.ACTIONS.LinesRemove)for(let e of r.inputs.lineIds){let s=n.findIndex(d=>d.id===e);if(s!==-1){if(C(n[s].id)){console.error("[h2:error:useOptimisticCart] Tried to remove an optimistic line that has not been added to the cart yet");continue}n.splice(s,1),c=!0}else console.warn(`[h2:warn:useOptimisticCart] Tried to remove line '${e}' but it doesn't exist in the cart`)}else if(r.action===f.ACTIONS.LinesUpdate)for(let e of r.inputs.lines){let s=n.findIndex(d=>e.id===d.id);if(s>-1){if(C(n[s].id)){console.error("[h2:error:useOptimisticCart] Tried to update an optimistic line that has not been added to the cart yet");continue}n[s].quantity=e.quantity,n[s].quantity===0&&n.splice(s,1),c=!0}else console.warn(`[h2:warn:useOptimisticCart] Tried to update line '${e.id}' but it doesn't exist in the cart`)}}return c&&(a.isOptimistic=c),a.totalQuantity=n.reduce((o,r)=>o+r.quantity,0),a}var A=l.createContext(void 0),F=A.Provider,_=()=>l.useContext(A);l.forwardRef((t,i)=>{let{waitForHydration:a,src:n,...c}=t,o=_();return a?h.jsx(N,{src:n,options:c}):h.jsx("script",{suppressHydrationWarning:!0,...c,src:n,nonce:o,ref:i})});function N({src:t,options:i}){if(!t)throw new Error("`waitForHydration` with the Script component requires a `src` prop");return P(t,{attributes:i}),null}function V(t,i){let a=g(),[n,c]=l.useState([]);if(l.useEffect(()=>{Promise.resolve(i).then(o=>{var r,e;o&&c(o instanceof Array?o:((e=(r=o.product)==null?void 0:r.variants)==null?void 0:e.nodes)||[])}).catch(o=>{reportError(new Error("[h2:error:useOptimisticVariant] An error occurred while resolving the variants for the optimistic product hook.",{cause:o}))})},[JSON.stringify(i)]),a.state==="loading"){let o=new URLSearchParams(a.location.search),r=!1,e=n.find(s=>s.selectedOptions?s.selectedOptions.every(d=>o.get(d.name)===d.value):(r||(r=!0,reportError(new Error("[h2:error:useOptimisticVariant] The optimistic product hook requires your product query to include variants with the selectedOptions field."))),!1));if(e)return{...e,isOptimistic:!0}}return t}l.lazy(()=>D(()=>import("./log-seo-tags-TY72EQWZ-DCHH-_Gl.js"),[]));export{F as E,f as J,V as d,k as v};
